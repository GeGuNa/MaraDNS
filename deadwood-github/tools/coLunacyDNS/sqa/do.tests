#!/bin/sh

if [ "$1" = "--help" ] ; then	
	echo Usage: $0 to run all tests 
	echo $0 --stop to stop if a test fails
	exit 0
fi

DoStop=""
if [ "$1" = "--stop" ] ; then
	DoStop="1"
fi

TESTS="sqa_rg32"
FAIL=""

for test in $TESTS ; do
	echo Test $test
	cd $test
	if ! ./do.test ; then
		FAIL=${FAIL}${test}" "
		if [ ! -z "$DoStop" ] ; then
			echo Stopping tests because of test failure
			exit 1
		fi
	fi
done
if [ -z "$FAIL" ] ; then
	echo All tests successful
	exit 0
fi
echo Test failures: ${FAIL}
exit 1
